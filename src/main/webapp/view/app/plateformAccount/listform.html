

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>平台账号编辑</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" href="../../../resources/js/layuiadmin/layui/css/layui.css" media="all">
  <script src="../../../resources/js/jquery/jquery-2.1.4.min.js"  type="text/javascript"></script>
  <script type="text/javascript" src="../../../resources/js/jquery/jquery.form.min.js"></script>
  <!-- 引入angular的js -->
  <script type="text/javascript" src="../../../resources/js/angularjs/angular.min.js"></script>
  <script type="text/javascript" src="../../../resources/js/customer/base/base.js"></script>
  <script type="text/javascript" src="../../../resources/js/customer/platformAccount/plateformAccountService.js"></script>
  <script type="text/javascript" src="../../../resources/js/customer/role/roleService.js"></script>
  <script type="text/javascript" src="../../../resources/js/customer/platformAccount/plateformAccountController.js"></script>
</head>
 <style>
    .plate-account-form{
      position: absolute;
      left: 50%;
      top: 50%;
      margin-left: -15px;
   	  margin-right: -50px;
      -webkit-transform: translate(-50%, -50%);
      -moz-transform: translate(-50%, -50%);
      -ms-transform: translate(-50%, -50%);
      -o-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
    }
    .checkLable {
	  color: red;
	  font-size: 12px;
	  width: auto;
	  position: absolute;
	  right: 0;
	  -webkit-transform: translateX(100%);
	  -moz-transform: translateX(100%);
	  -ms-transform: translateX(100%);
	  -o-transform: translateX(100%);
	  transform: translateX(100%);
	}
  </style>
<body ng-app="stopSimple" ng-controller="plateformAccountController" ng-init="findOne()">
  <div class="layui-form plate-account-form" lay-filter="layuiadmin-app-form-list" id="layuiadmin-app-form-list">
    <div class="layui-form-item">
      <label class="layui-form-label">账户名</label>
      <div class="layui-input-inline">
        <input type="text" id= "accountNameId" name="accountName" lay-verify="required" placeholder="请输入邮箱号码" autocomplete="off" class="layui-input" ng-model="entity.accountName">
      </div>
      <label class="checkLable layui-form-label" style="text-align: left;">{{accountNameCheckErr}}</label>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">姓名</label>
      <div class="layui-input-inline">
        <input type="text" id="userNameId" name="userName" lay-verify="required" placeholder="" autocomplete="off" class="layui-input" ng-model="entity.userName">
      </div>
    </div>
    <div class="layui-form-item" ng-show = "isShow">
      <label class="layui-form-label">密码</label>
      <div class="layui-input-inline">
        <input type="password" id="passwordId" name="password" lay-verify="required" placeholder="密码长度必须为6~20位" autocomplete="off" class="layui-input" >
      </div>
    </div>
    <div class="layui-form-item" ng-show = "isShow">
      <label class="layui-form-label">确认密码</label>
      <div class="layui-input-inline">
        <input type="password" id="repasswordId" name="repassword" lay-verify="required" placeholder="密码长度必须为6~20位" autocomplete="off" class="layui-input" >
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">所属角色</label>
      <div class="layui-input-inline">
        <select id="role_id" name="roleId" lay-verify="required" ng-model="entity.role.id">
        </select>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">用户描述</label>
      <div class="layui-input-inline">
        <input type="text" id="descriptionId" name="description" lay-verify="required"  autocomplete="off" class="layui-input" ng-model="entity.description">
      </div>
    </div>
    <div class="layui-form-item layui-hide">
      <input type="button" lay-submit lay-filter="layuiadmin-app-form-submit" id="layuiadmin-app-form-submit" value="确认添加">
      <input type="button" lay-submit lay-filter="layuiadmin-app-form-edit" id="layuiadmin-app-form-edit" value="确认编辑">
    </div>
  </div>

  <script src="../../../resources/js/layuiadmin/layui/layui.js"></script>  
  <script>
  layui.config({
    base: '../../../resources/js/layuiadmin/' //静态资源所在路径
  }).extend({
    index: 'lib/index' //主入口模块
  }).use(['index', 'form'], function(){
    var $ = layui.$
    ,form = layui.form;
    
    //监听提交
    form.on('submit(layuiadmin-app-form-submit)', function(data){
      var field = data.field; //获取提交的字段
      var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引  
      //提交 Ajax 成功后，关闭当前弹层并重载表格
      //$.ajax({});
      console.log(1111111111)
      parent.layui.table.reload('LAY-app-content-list'); //重载表格
      parent.layer.close(index); //再执行关闭 
    });
  //监听提交
    form.on('submit(layuiadmin-app-form-edit)', function(data){
      var field = data.field; //获取提交的字段
      var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引  
      //提交 Ajax 成功后，关闭当前弹层并重载表格
      //$.ajax({});
      console.log(1111111111)
      parent.layui.table.reload('LAY-app-content-list'); //重载表格
      parent.layer.close(index); //再执行关闭 
    });
  })
  </script>
</body>
</html>